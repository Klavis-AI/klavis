---
title: "Perplexity"
description: "Learn how to use Klavis to connect your AI application to Perplexity MCP Server"
---

import NoCodeSnippet from "/snippets/mcp-server-card/no-code.mdx";

<NoCodeSnippet />

---

## For Developer

The Perplexity MCP Server provides focused web search capabilities using Perplexity AI's powerful Sonar models. This streamlined server enables AI assistants to perform web searches with automatic citation handling through a single, optimized tool.

### Available Tools

The server provides a single, focused tool:

#### `perplexity_search`

- **Model**: `sonar-pro`
- **Use Case**: Web search and quick answers with citations
- **Best For**: Real-time information retrieval, research queries, and factual questions

This streamlined implementation focuses solely on web search capabilities to provide fast, reliable results with automatic citation handling.

### Input Format

The tool accepts an array of message objects:

```json
{
  "messages": [
    {
      "role": "system|user|assistant",
      "content": "The message content"
    }
  ]
}
```

### Response Format

The tool returns a string response that includes:

- The main response content from the AI model
- Automatically appended citations (when available)
- Numbered citation format: `[1] source_url`

### Integration Examples

#### Using MCP Client

```python
# Example: Web search with conversation context
response = await client.call_tool(
    "perplexity_search",
    {
        "messages": [
            {"role": "system", "content": "You are a helpful research assistant."},
            {"role": "user", "content": "What are the latest developments in artificial intelligence?"}
        ]
    }
)

# Example: Quick factual query
response = await client.call_tool(
    "perplexity_search",
    {
        "messages": [
            {"role": "user", "content": "What is the current population of Tokyo?"}
        ]
    }
)

# Example: Research query with specific focus
response = await client.call_tool(
    "perplexity_search",
    {
        "messages": [
            {"role": "user", "content": "Explain the environmental benefits of renewable energy sources"}
        ]
    }
)
```

#### Direct HTTP Calls

```bash
# Test the perplexity_search tool
curl -X POST \
  -H "Content-Type: application/json" \
  -H "x-api-key: your_perplexity_key" \
  -d '{"method": "tools/call", "params": {"name": "perplexity_search", "arguments": {"messages": [{"role": "user", "content": "What are the benefits of renewable energy?"}]}}}' \
  https://your-server-url/mcp
```

### Authentication

The Perplexity MCP server requires a Perplexity AI API key. Pass it in the request headers:

```
x-api-key: your_perplexity_api_key_here
```

### Tool Details

| Feature       | Value               | Description                            |
| ------------- | ------------------- | -------------------------------------- |
| **Tool Name** | `perplexity_search` | Single optimized web search tool       |
| **Model**     | `sonar-pro`         | Perplexity's fast, web-search model    |
| **Response**  | Fast                | Quick responses with citations         |
| **Use Cases** | Web search          | Real-time information, research, facts |

### Error Handling

The server returns descriptive error messages for common issues:

- Invalid message format
- Missing API key
- API rate limits
- Network errors

All responses follow the standard MCP protocol format for consistent error handling across your application.
