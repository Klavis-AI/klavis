---
title: "Perplexity"
description: "Learn how to use Klavis to connect your AI application to Perplexity MCP Server"
---

import NoCodeSnippet from "/snippets/mcp-server-card/no-code.mdx";

<NoCodeSnippet />

---

## For Developer

The Perplexity MCP Server provides conversational AI capabilities using Perplexity AI's powerful Sonar models. It enables AI assistants to engage in conversations, perform deep research, and conduct reasoning tasks with automatic citation handling.

### Available Tools

The server provides three main tools that leverage different Perplexity AI models:

#### 1. `perplexity_search`

- **Model**: `sonar-pro`
- **Use Case**: Web search and quick answers
- **Best For**: Fast responses for search queries

#### 2. `perplexity_research`

- **Model**: `sonar-deep-research`
- **Use Case**: In-depth research requiring comprehensive analysis
- **Best For**: Academic research, detailed investigations

#### 3. `perplexity_reason`

- **Model**: `sonar-reasoning-pro`
- **Use Case**: Complex reasoning, analysis, and logical thinking tasks
- **Best For**: Problem-solving, decision analysis, logical reasoning

### Input Format

All tools accept an array of message objects:

```json
{
  "messages": [
    {
      "role": "system|user|assistant",
      "content": "The message content"
    }
  ]
}
```

### Response Format

All tools return a string response that includes:

- The main response content from the AI model
- Automatically appended citations (when available)
- Numbered citation format: `[1] source_url`

### Integration Examples

#### Using MCP Client

```python
# Example: Web search
response = await client.call_tool(
    "perplexity_search",
    {
        "messages": [
            {"role": "user", "content": "What is machine learning?"}
        ]
    }
)

# Example: Deep research
response = await client.call_tool(
    "perplexity_research",
    {
        "messages": [
            {"role": "user", "content": "Research the latest developments in quantum computing"}
        ]
    }
)

# Example: Reasoning task
response = await client.call_tool(
    "perplexity_reason",
    {
        "messages": [
            {"role": "user", "content": "Analyze the pros and cons of microservices vs monolithic architecture"}
        ]
    }
)
```

#### Direct HTTP Calls

```bash
# Test web search
curl -X POST \
  -H "Content-Type: application/json" \
  -H "x-api-key: your_perplexity_key" \
  -d '{"method": "tools/call", "params": {"name": "perplexity_search", "arguments": {"messages": [{"role": "user", "content": "What are the benefits of renewable energy?"}]}}}' \
  https://your-server-url/mcp
```

### Authentication

The Perplexity MCP server requires a Perplexity AI API key. Pass it in the request headers:

```
x-api-key: your_perplexity_api_key_here
```

### Model Comparison

| Tool                  | Model                 | Response Time | Detail Level | Best Use Case                     |
| --------------------- | --------------------- | ------------- | ------------ | --------------------------------- |
| `perplexity_search`   | `sonar-pro`           | Fast          | Moderate     | Web search, quick questions       |
| `perplexity_research` | `sonar-deep-research` | Slower        | High         | In-depth research, analysis       |
| `perplexity_reason`   | `sonar-reasoning-pro` | Moderate      | High         | Logic, reasoning, problem-solving |

### Error Handling

The server returns descriptive error messages for common issues:

- Invalid message format
- Missing API key
- API rate limits
- Network errors

All responses follow the standard MCP protocol format for consistent error handling across your application.
